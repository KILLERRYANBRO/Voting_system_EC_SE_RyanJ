{% extends 'base.html' %}
{% block title %}Vote{% endblock %}

{% block content %}
<h1>Prefect Voting System</h1>

<!-- Candidate data passed to JavaScript -->
<script>
  window.boysData = {{ boy_dicts | tojson }};
  window.girlsData = {{ girl_dicts | tojson }};
</script>

<div class="main-layout">
  <!-- Left: the form -->
  <form method="POST" action="{{ url_for('submit_vote') }}" class="vote-form-wrapper">
    <!-- Boy voting section -->
    <div class="vote-form vote-form-boy">
      <div class="vote-section">
        <h2>Boys</h2>
        {% for i in range(1, 3+1) %}
          <select class="form-select boy-select" name="boy{{ i }}" required>
            <option value="">Boy Vote {{ i }}</option>
            {% for b in boys %}
              <option value="{{ b.id }}">{{ b.name }}</option>
            {% endfor %}
          </select>
        {% endfor %}
      </div>
    </div>

    <!-- Girl voting section -->
    <div class="vote-form vote-form-girl">
      <div class="vote-section">
        <h2>Girls</h2>
        {% for i in range(1, 3+1) %}
          <select class="form-select girl-select" name="girl{{ i }}" required>
            <option value="">Girl Vote {{ i }}</option>
            {% for g in girls %}
              <option value="{{ g.id }}">{{ g.name }}</option>
            {% endfor %}
          </select>
        {% endfor %}
      </div>
    </div>

    <!-- Submit button inside the form -->
    <div style="margin-top: 20px; text-align: center; width: 100%;">
      <input type="submit" value="Submit Vote">
    </div>
  </form>

  <!-- Right: Live preview -->
  <div class="preview-container">
    <div id="left-cards" class="preview-column"></div>
    <div id="right-cards" class="preview-column"></div>
  </div>
</div>

<!-- Include the vote preview JavaScript -->
<script src="{{ url_for('static', filename='vote_preview.js') }}"></script>
{% endblock %}
